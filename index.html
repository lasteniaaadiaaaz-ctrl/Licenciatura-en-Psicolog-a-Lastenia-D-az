<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Licenciatura en Psicología</title>
<style>
    body {
        font-family: 'Century Gothic', sans-serif;
        background-color: #84994F;
        margin: 0;
        padding: 20px;
        color: #000;
    }
    h1 {
        color: #FFE797; /* color perla */
        text-align: center;
        margin-bottom: 30px;
    }
    .malla {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        justify-content: center;
    }
    .trimestre {
        background-color: #FFFFFF;
        padding: 15px;
        border-radius: 10px;
        min-width: 220px;
    }
    .trimestre h2 {
        color: #B45253; /* rojo */
        text-align: center;
        margin-bottom: 10px;
    }
    .materia {
        background-color: #FF937E; /* rosado */
        margin: 5px 0;
        padding: 8px;
        border-radius: 6px;
        cursor: pointer;
        position: relative;
    }
    .materia.bloqueada {
        background-color: #FFC9BD;
        cursor: not-allowed;
    }
    .materia.aprobada {
        background-color: #D0E0C3;
    }
    .requisitos {
        display: none;
        font-size: 0.8em;
        color: #555;
        margin-top: 3px;
        padding-left: 10px;
    }
    button.toggle-requisitos {
        margin-bottom: 15px;
        padding: 8px 12px;
        border: none;
        border-radius: 5px;
        background-color: #B45253;
        color: white;
        cursor: pointer;
    }
    .tooltip {
        position: absolute;
        background: #FFF;
        color: #000;
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        top: 100%;
        left: 0;
        white-space: nowrap;
        display: none;
        z-index: 10;
        font-size: 0.8em;
    }
</style>
</head>
<body>

<h1>Licenciatura en Psicología</h1>
<button class="toggle-requisitos">Mostrar/Ocultar Requisitos</button>
<div class="malla" id="malla"></div>

<script>
const mallaData = [
    {
        trimestre: "I Trimestre",
        materias: [
            { nombre: "Español" },
            { nombre: "Biología" },
            { nombre: "Matemáticas" },
            { nombre: "Introducción a la Psicología" },
            { nombre: "Filosofía" }
        ]
    },
    {
        trimestre: "II Trimestre",
        materias: [
            { nombre: "Expresión Oral y Escrita", requisitos: ["Español"] },
            { nombre: "Sociología" },
            { nombre: "Estadística", requisitos: ["Matemáticas"] },
            { nombre: "Historia de Honduras" },
            { nombre: "Teorías de Personalidad", requisitos: ["Introducción a la Psicología"] },
            { nombre: "El Hombre Frente a la Vida", requisitos: ["Filosofía"] }
        ]
    },
    {
        trimestre: "III Trimestre",
        materias: [
            { nombre: "Psicofisiología I", requisitos: ["Biología"] },
            { nombre: "Métodos y Técnicas de Investigación", requisitos: ["Estadística"] },
            { nombre: "Entrevista Psicológica", requisitos: ["Expresión Oral y Escrita"] },
            { nombre: "Redacción Psicológica", requisitos: ["Expresión Oral y Escrita"] },
            { nombre: "Informática" },
            { nombre: "Ética Profesional", requisitos: ["El Hombre Frente a la Vida"] },
            { nombre: "Ecología" },
            { nombre: "Electiva I" }
        ]
    },
    {
        trimestre: "IV Trimestre",
        materias: [
            { nombre: "Psicofisiología II", requisitos: ["Psicofisiología I"] },
            { nombre: "Métodos de Investigación Psicológica", requisitos: ["Métodos y Técnicas de Investigación"] },
            { nombre: "Psicología del Desarrollo del Niño", requisitos: ["Teorías de Personalidad"] },
            { nombre: "Psicología del Desarrollo del Adolescente", requisitos: ["Teorías de Personalidad"] },
            { nombre: "Psicopatología I" },
            { nombre: "Electiva II" },
            { nombre: "Electiva III" },
            { nombre: "Doctrina Social de la Iglesia", requisitos: ["Ética Profesional"] }
        ]
    },
    {
        trimestre: "V Trimestre",
        materias: [
            { nombre: "Psicometría I", requisitos: ["Métodos de Investigación Psicológica", "Psicología del Desarrollo del Niño"] },
            { nombre: "Teoría y Clínica del Psicoanálisis", requisitos: ["Psicología del Desarrollo del Niño"] },
            { nombre: "Psicología de las Organizaciones I", requisitos: ["Métodos de Investigación Psicológica"] },
            { nombre: "Psicología Social I", requisitos: ["Métodos de Investigación Psicológica"] },
            { nombre: "Psicopatología II", requisitos: ["Psicopatología I"] },
            { nombre: "Psicología del Desarrollo de la Adultez y la Vejez", requisitos: ["Psicología del Desarrollo del Adolescente"] },
            { nombre: "Ética en Psicología", requisitos: ["Ética Profesional"] }
        ]
    },
    {
        trimestre: "VI Trimestre",
        materias: [
            { nombre: "Psicometría II", requisitos: ["Psicometría I"] },
            { nombre: "Técnicas Proyectivas I", requisitos: ["Teoría y Clínica del Psicoanálisis"] },
            { nombre: "Teoría e Intervención en Psicología Humanística", requisitos: ["Psicología del Desarrollo de la Adultez y la Vejez"] },
            { nombre: "Psicología de las Organizaciones II", requisitos: ["Psicología de las Organizaciones I"] },
            { nombre: "Psicología Social II", requisitos: ["Psicología Social I"] },
            { nombre: "Psicología del Aprendizaje", requisitos: ["Métodos de Investigación Psicológica"] },
            { nombre: "Gestión de la Calidad Total" }
        ]
    },
    {
        trimestre: "VII Trimestre",
        materias: [
            { nombre: "Psicometría III", requisitos: ["Psicometría II"] },
            { nombre: "Técnicas Proyectivas II", requisitos: ["Técnicas Proyectivas I"] },
            { nombre: "Teoría e Intervención en Psicología Cognitiva", requisitos: ["Teoría e Intervención en Psicología Humanística"] },
            { nombre: "Psicología del Talento Humano", requisitos: ["Psicología de las Organizaciones II"] },
            { nombre: "Psicología del Deporte", requisitos: ["Psicología de las Organizaciones II"] },
            { nombre: "Psicología Preventiva y Salud Pública", requisitos: ["Psicología Social II"] },
            { nombre: "Psicología Educativa", requisitos: ["Psicología del Aprendizaje"] }
        ]
    },
    {
        trimestre: "VIII Trimestre",
        materias: [
            { nombre: "Psicometría IV", requisitos: ["Psicometría III"] },
            { nombre: "Teoría y Abordaje de la intervención en Crisis", requisitos: ["Psicología Preventiva y Salud Pública"] },
            { nombre: "Técnicas Terapéuticas I", requisitos: ["Teoría e Intervención en Psicología Cognitiva"] },
            { nombre: "Orientación y Consejería Psicológica", requisitos: ["Teoría e Intervención en Psicología Cognitiva"] },
            { nombre: "Diagnóstico e Intervención Psicoeducativa", requisitos: ["Psicología Educativa"] },
            { nombre: "Control Estadístico de la Calidad", requisitos: ["Gestión de la Calidad Total"] }
        ]
    },
    {
        trimestre: "IX Trimestre",
        materias: [
            { nombre: "Técnicas Terapéuticas II", requisitos: ["Técnicas Terapéuticas I"] },
            { nombre: "Diagnósticos e Informes Psicológicos", requisitos: ["Técnicas Proyectivas II", "Psicometría IV"] },
            { nombre: "Metodología y Modelos de Intervención Comunitaria", requisitos: ["Teoría y Abordaje de la intervención en Crisis"] },
            { nombre: "Orientación Vocacional y Profesional", requisitos: ["Diagnóstico e Intervención Psicoeducativa"] },
            { nombre: "Psicología Jurídica", requisitos: ["Orientación y Consejería Psicológica"] },
            { nombre: "Nutrición" }
        ]
    },
    {
        trimestre: "X Trimestre",
        materias: [
            { nombre: "Diseño y Desarrollo de Proyectos de Psicología Aplicada" },
            { nombre: "Seminario de Investigación en Psicología Aplicada", requisitos: ["Métodos de Investigación Psicológica"] },
            { nombre: "Seminario de Salud Mental en Honduras", requisitos: ["Metodología y Modelos de Intervención Comunitaria"] },
            { nombre: "Planeación y Diseño de un Modelo de Calidad", requisitos: ["Control Estadístico de la Calidad"] },
            { nombre: "Práctica" }
        ]
    }
];

let mostrarRequisitos = false;

function cargarMalla() {
    const mallaContainer = document.getElementById('malla');
    mallaContainer.innerHTML = '';

    const aprobadas = JSON.parse(localStorage.getItem('materiasAprobadas') || '[]');

    mallaData.forEach(trim => {
        const trimestreDiv = document.createElement('div');
        trimestreDiv.className = 'trimestre';
        const titulo = document.createElement('h2');
        titulo.textContent = trim.trimestre;
        trimestreDiv.appendChild(titulo);

        trim.materias.forEach(m => {
            const materiaDiv = document.createElement('div');
            materiaDiv.className = 'materia';
            materiaDiv.textContent = m.nombre;

            // Verificar si está aprobada
            if (aprobadas.includes(m.nombre)) {
                materiaDiv.classList.add('aprobada');
            }

            // Verificar si tiene requisitos y si están aprobados
            if (m.requisitos) {
                const pendientes = m.requisitos.filter(r => !aprobadas.includes(r));
                if (pendientes.length > 0) {
                    materiaDiv.classList.add('bloqueada');
                    materiaDiv.title = "Falta aprobar: " + pendientes.join(', ');

                    // tooltip extra
                    const tooltip = document.createElement('span');
                    tooltip.className = 'tooltip';
                    tooltip.textContent = "Falta aprobar: " + pendientes.join(', ');
                    materiaDiv.appendChild(tooltip);

                    materiaDiv.addEventListener('mouseenter', () => { tooltip.style.display = 'block'; });
                    materiaDiv.addEventListener('mouseleave', () => { tooltip.style.display = 'none'; });
                }
            }

            // Requisitos visibles debajo
            if (m.requisitos) {
                const reqDiv = document.createElement('div');
                reqDiv.className = 'requisitos';
                reqDiv.textContent = "Requisitos: " + m.requisitos.join(', ');
                if (mostrarRequisitos) reqDiv.style.display = 'block';
                materiaDiv.appendChild(reqDiv);
            }

            materiaDiv.addEventListener('click', () => {
                if (!materiaDiv.classList.contains('bloqueada')) {
                    materiaDiv.classList.toggle('aprobada');
                    actualizarLocalStorage();
                    cargarMalla();
                }
            });

            trimestreDiv.appendChild(materiaDiv);
        });

        mallaContainer.appendChild(trimestreDiv);
    });
}

function actualizarLocalStorage() {
    const aprobadas = [];
    document.querySelectorAll('.materia.aprobada').forEach(m => {
        aprobadas.push(m.firstChild.textContent);
    });
    localStorage.setItem('materiasAprobadas', JSON.stringify(aprobadas));
}

// Toggle de requisitos
document.querySelector('.toggle-requisitos').addEventListener('click', () => {
    mostrarRequisitos = !mostrarRequisitos;
    document.querySelectorAll('.requisitos').forEach(r => {
        r.style.display = mostrarRequisitos ? 'block' : 'none';
    });
});

cargarMalla();
</script>

</body>
</html>
